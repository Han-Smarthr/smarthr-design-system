---
title: 'NotificationBar'
description: 'ユーザーに操作の結果などをシステムからの通知として表示するためのコンポーネントです。'
---
import { useEffect, useState } from 'react'
import { ComponentPreview } from '@Components/ComponentPreview'
import { ComponentStory } from '@Components/ComponentStory'
import { ComponentPropsTable } from '@Components/ComponentPropsTable'
import { NotificationBar, Button, Stack} from 'smarthr-ui'
import { VideoEmbed } from '@Components/article/VideoEmbed/VideoEmbed'

ユーザーに操作の結果などをシステムからの通知として表示するためのコンポーネントです。

<ComponentStory name="NotificationBar" />

## 使用上の注意

### 操作の結果をシステムから通知するために使用する

NotificationBarは、ユーザーが行なった操作への応答や、操作が反映されている状態を示すといった、システムからの通知の表示に使用します。

サービス運営上の利用促進や訴求といったメッセージングに使用してしまうと、それがシステムからの応答なのか、運営者からの情報なのかをユーザーの判断に委ねることになります。
その結果、ユーザーが行なった操作に対するシステムからのフィードバックとしての一貫性を担保できなくなり、ユーザーに適切な操作を促すことが難しくなるためです。

システムからの応答としてのフィードバックではない、その他の重要なお知らせや情報などの表示が必要な場合は、[InformationPanel](/products/components/information-panel/)を使用してください。

### フィードバックするテキストは省略表示しない

原則として、NotificationBarに表示するテキストメッセージは[LineClamp](/products/components/line-clamp/)などで省略表示しないでください。
表示を省略してしまうと、ユーザーがその後に続くタスクや操作を判断しづらくなり、適切な操作を促すことが難しくなるためです。

NotificationBarは、簡潔な一行程度の文章になるように調整してください。
どうしても情報量や他の要素を併記する必要がある場合は、[InformationPanel](/products/components/information-panel/)を使用してください。

## 種類

メッセージで伝えたいことや、メッセージの重要度に合わせて5種類を定義しています。

```tsx editable codeBlock
<Stack style={{width: '100%', background: '#f8f7f6', padding: '8px'}}>
  <NotificationBar type="info" message="バックグラウンド処理中です。" />
  <NotificationBar type="success" message="タスクの削除に成功しました。" />
  <NotificationBar type="warning" message="情報の整合性が取れなくなる可能性があります。" />
  <NotificationBar type="error" message="タスクの削除に失敗しました。" />
  <NotificationBar type="sync" message="データ連携を実行中です。" />
</Stack>
```

## 状態

### 強調

ユーザーへのアテンションを高めたい場合は、`bold`にすることを検討します。

```tsx editable codeBlock
<Stack style={{width: '100%', background: '#f8f7f6', padding: '8px'}}>
  <NotificationBar type="success" bold message="タスクの削除に成功しました。" onClose={()=>{}} />
  <NotificationBar type="warning" bold message="情報の整合性が取れなくなる可能性があります。" onClose={()=>{}} />
  <NotificationBar type="error" bold message="タスクの削除に失敗しました。" onClose={()=>{}} />
</Stack>
```

### アニメーション

メッセージが表示されたことを強調したい場合は、`animate`にすることでスライドインのアニメーション効果を追加できます。

<!-- textlint-disable -->
export const AnimateNotificationBar = () => {
  const [visible, setVisible] = useState(false)
  return (
    <Stack style={{ width: '100%', background: '#f8f7f6', padding: '8px', }}>
      {visible && (
        <NotificationBar
          type="success"
          bold
          message="タスクの登録に成功しました。"
          animate
          onClose={() => setVisible(!visible)}
        />
      )}
      <Button onClick={() => setVisible(!visible)}>NotificationBarを{visible ? '隠す' : '表示'}</Button>
    </Stack>
  )
}

<!-- textlint-enable -->

<ComponentPreview>
  <AnimateNotificationBar />
</ComponentPreview>

### その他

ボタンやテキストリンクを表示したり、常時表示したいときは「閉じる」ボタンを非表示にできます。

```tsx editable codeBlock
<Stack style={{width: '100%', background: '#f8f7f6', padding: '8px'}}>
  <NotificationBar type="info" message="ボタンやテキストリンクを表示できます。" onClose={()=>{}}>
    <Button size="s">編集</Button>
    <TextLink href="#">
      <Text size="S">ヘルプ</Text>
    </TextLink>
  </NotificationBar>
  <NotificationBar type="success" message="onClose を省略すると、閉じるボタンを非表示にできます。" />
</Stack>
```

## デザインパターン

### ページ全体の操作へのフィードバック

主に「操作後に、ダイアログ内や画面全体が切り替わるとき」や「ダイアログで操作し、元の画面に戻るとき」などに使います。

- ユーザーにメッセージが表示されたことを強調するために、[アニメーションを有効](#h3-1)にします。
- ユーザーの明示的な操作で非表示にします。時間の経過で閉じることは非推奨です（[※1](#h2-4)）。

#### オブジェクトに関する操作を行なった直後にページ全体にフィードバックを表示

コレクションへのオブジェクトの追加・削除など、オブジェクトに関する操作を行なった直後に、結果を表示する典型的な例です。  
以下の例では操作が成功したため`type="success"`を表示しています。エラーの場合は`type="error"`を指定します。

<VideoEmbed
  poster="/images/notification-bar_thumb.png"
  source="/video/notification-bar.mp4"
  title="動画:コレクションにオブジェクトを、ダイアログから登録する際にNotificationBarを使い成功した旨のメッセージを表示している"
  tracks={[{src: "/video/notification-bar.vtt", kind: "captions", srcLang: "ja", label: "日本語", default: true}]}
/>

#### 操作箇所から離れている場合はスクロール追従するようにフィードバックを表示

操作するボタンなどと、NotificationBarによるフィードバックが視覚的に離れている場合は、`positon: sticky`でスクロールに追従させ、フィードバックに気づきやすくすることを推奨します。  
以下の例では、スクロールに関わらずNotificationBarを画面上部に固定表示しています。

<VideoEmbed
  poster="/images/notification-bar-sticky_thumb.png"
  source="/video/notification-bar-sticky.mp4"
  title="動画:NotificationBarを`positon: sticky`で追従表示している"
  tracks={[{src: "/video/notification-bar-sticky.vtt", kind: "captions", srcLang: "ja", label: "日本語", default: true}]}
/>

## Props

<ComponentPropsTable name="NotificationBar" />

## 参考文献

※1. [Web Content Accessibility Guidelines - 2.2.1 タイミング調整可能を理解する](https://waic.jp/docs/UNDERSTANDING-WCAG20/time-limits-required-behaviors.html)
