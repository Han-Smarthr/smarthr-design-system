---
title: 'フィードバック'
description: '操作の結果やユーザーが開始した処理の状況を伝えるUIのルールを定義します。'
order: 13
---

ユーザーに操作の結果を伝えるUIのルールを定義します。

## 基本的な考え方

ユーザーが行なった操作へのシステムからの応答をフィードバックと呼びます。メッセージを画面上に表示したり、コンポーネントの意匠を変更するなどの方法が取られます。

フィードバックはユーザーが操作の結果を理解し、次の行動を判断するために重要です。ユーザーがシステムに何らかの操作をした際は受動的にその結果を認識できるよう、素早く画面上にフィードバックのためのUIを表示してください。

## アクセシビリティ

### 操作部の近くでフィードバックする

ユーザーは画面の全領域の変化に常に気づくとは限りません。特に拡大鏡を利用する弱視・ロービジョンのユーザーは、拡大表示範囲外の変化を認識できません。
可能な限り、直前までユーザーが操作していた要素の近くか、コンポーネント自体の変化で操作の結果をフィードバックします。

関連リンク：[弱視・ロービジョンのユーザーのウェブ利用時の課題と解決案](/accessibility/low-vision/)

### スクリーンリーダーでの読み上げ順序を考慮する

[WIP]

## 状況に応じたパターン
操作の結果をフィードバックする代表的な状況には以下の3つが挙げられます。

1. フォームの入力・送信時
1. 処理の実行時
<!-- textlint-disable -->
1. ページとその要素の読み込み時
<!-- textlint-enable -->

### フォームの入力・送信時

フォームの入力・送信時には主に入力内容が不正である場合のエラーメッセージを表示します。

入力された値が不正である場合の例：

- 入力必須の入力要素の値が空
- データ型が異なる
- 値が許容範囲外

フォームの入力・送信時に入力内容が不正であることをフィードバックするUIの考え方は以下の通りです。

1. 値が不正であることが入力時に判定できる場合
    - 入力要素からフォーカスが外れたタイミングで、入力要素に対してエラーメッセージを表示します。
    - 値が修正され、エラーの原因が解消された場合はエラーメッセージの表示を止めます。
1. 値が不正であることが入力時に判定できず、フォームの送信時に判定する場合
    - 送信ボタンの押下後に、入力要素と送信ボタンに対してエラーメッセージを表示します。
    - 再度送信ボタンが押下された際に、エラーの原因が解消されていた場合はエラーメッセージの表示を止めます。

入力要素に対するエラーメッセージは、[FormControl](/products/components/form-control/)か[Fieldset](/products/components/fieldset/)の`errorMessages`を利用して、入力要素の付近に表示します。どの入力要素がエラーとなっているかを視覚的に見つけやすくするために、入力要素にも`error`状態を付加して意匠を変化させます。

送信ボタンに対するエラーメッセージは、`error`状態の[ResponseMessage](/products/components/response-message/)を利用して表示します。

[wip] ダイアログの例の画像

### 処理の実行時

同期的に実行される処理に対するフィードバックについて説明します。非同期処理のフィードバックについては、[バックグラウンド処理](/products/design-patterns/background-jobs-results/)を参照してください。

処理の実行時のフィードバックには、処理開始時〜処理中のフィードバックと結果のフィードバック（成功時・失敗時）があります。まず、処理中であることを示し、処理が完了したらその結果を表示します。

#### 処理開始時〜処理中のフィードバック

処理が開始したことおよび処理中であることをフィードバックするUIの考え方は以下の通りです。

1. [Button](/products/components/button/)の押下によって処理が実行された場合
    - `loading`状態のButtonを利用します。
1. Button以外の操作によって処理が実行された場合
    - ユーザーが直前に操作していた要素の近くに`sync`状態の[ResponseMessage](/products/components/response-message/)を表示することを検討します。
1. ユーザーが直前に操作していた要素の近くに表示することが難しい場合
    - `sync`状態の[NotificationBar](/products/components/notification-bar/)を表示します。
    - 例：操作後に画面全体の切り替えが発生する場合

[wip] それぞれのパターンの例の画像

#### 結果のフィードバック

結果をフィードバックするUIの考え方は以下の通りです。

1. まず、ユーザーが直前に操作していたButtonなどの近くに[ResponseMessage](/products/components/response-message/)を表示することを検討します。
1. ユーザーが直前に操作していたButtonなどの近くに表示するのが難しい場合
    - [NotificationBar](/products/components/notification-bar/)の利用を検討します。
    - 例：操作後にダイアログ・画面全体の切り替えが発生する場合や、ダイアログが消えて元の画面に戻る場合
1. 記載する情報が多くResponseMessageやNotificationBarでは表示しきれない場合
    - [InformationPanel](/products/components/information-panel/)の利用を検討します。

成功時には`success`状態で、失敗時には`error`状態でResponseMessage, NotificationBar, InformationPanelを表示します。

[wip] それぞれのパターンの例の画像

また、成功時のフィードバックは成功したことが自明である場合は省略できますがユーザーが状態を正しく理解できるよう十分に注意してください。

- 例：オブジェクトの新規インスタンスを作成すると、作成された新規インスタンスの詳細画面へ自動的に移動する場合, [Switch](/products/components/switch/)など、コンポーネント自体がその状態を示す場合

<!-- textlint-disable -->

### ページとその要素の読み込み時

<!-- textlint-enable -->

ユーザーがページを開いた際、再読み込みした際、ページ内の一部要素が読み込まれる際のフィードバックについて説明します。

ページとその要素の読み込み時のフィードバックには、処理中のフィードバックと結果のフィードバック（失敗時）があります。まず、処理中であることを示し、読み込みに失敗したらその結果を表示します。

#### 処理中のフィードバック

処理中のフィードバックには、[Loader](/products/components/loader/)を利用してください。読み込みの対象となっている領域にLoaderを表示します。

[wip] Loaderの例の画像

#### 結果のフィードバック

結果をフィードバックするUIの考え方は以下の通りです。

1. ページ全体の表示に失敗した場合
    - [ErrorScreen](/products/components/error-screen/)を利用します。
1. 特定の要素の表示に失敗した場合
    - [NotificationBar](/products/components/notification-bar/)を表示します。

成功時は、要素が表示されることでその結果が自明であるため、フィードバックのためのUIは表示しません。

[wip] それぞれのパターンの例の画像