---
title: 'バックグラウンド処理'
description: 'SmartHRオプション機能のバックグラウンド処理のレイアウトパターンをまとめています。'
order: 1
---

バックグラウンドで実行される操作に関するUIを定義します。

## 基本的な考え方

処理に時間がかかり、フィードバックを表示するまでに時間差が生じる場合、バックグラウンド（非同期）処理として扱います。

同期処理の場合は、操作した画面上に処理結果を表示します。バックグラウンド処理の場合は結果を表示するための画面を用意します。

## 構成

バックグラウンド処理のUIは以下の要素で構成されます。

- バックグラウンド処理結果への案内
- バックグラウンド処理結果の一覧画面
- バックグラウンド処理結果の詳細画面

### バックグラウンド処理結果への案内

ユーザーには、バックグラウンド処理であるかどうかはわからないため、操作後に伝える必要があります。

バックグラウンド処理が進行していることと結果をどこで確認すればよいかが伝わるようにしましょう。

案内の方法としては次のような例があげられます。

#### [NofiticationBar](https://smarthr.design/products/components/notification-bar/)で案内する場合

操作が行なわれた画面にNotification Barでバックグラウンド処理が進行していることと結果画面へのリンクを表示します。

#### [Dialog](https://smarthr.design/products/components/dialog/)で案内する場合

ユーザーが操作後、バックグラウンド処理画面を表示し、Dialogでバックグラウンド処理が進行していることを伝えます。

もしくは、操作が行なわれた画面にDialogを表示します。Dialog上には、バックグラウンド処理が進行していることと結果画面へのリンクを表示します。

### バックグラウンド処理結果の一覧画面

バックグラウンド処理として受け付けた処理を一覧で表示する画面です。

#### 画面内の要素

バックグラウンド処理結果の一覧画面は以下の要素で構成されます。

- ステータス
- 処理名
- 受付日時
- 結果概要

その他の要素については必要に応じて判断してください。

一覧画面内の要素の詳細については[詳細画面の画面内の要素]()を参照してください。

#### レイアウト

### バックグラウンド処理結果の詳細画面

バックグラウンド処理結果の詳細を伝える画面です。

#### 画面内の要素

バックグラウンド処理結果詳細画面は以下の要素で構成されます。

1. ステータス
2. タイトル（処理名）
3. 処理情報
    - 実行者
    - 受付日時
    - 所要時間
4. 処理結果
    - 結果詳細
    - エラー内容
    - 添付ファイル

##### 1. ステータス

処理のステータスを表示します。
ステータスについての詳細な説明は[種類]()を参照してください。

##### 2. タイトル（処理名）

操作したあとに実行された処理の内容が想像できるように、 `｛オブジェクト｝の｛操作｝`で記載します。

例：
- 評価の削除
- 従業員の一括招待
- 従業員情報のダウンロード

##### 3. 処理情報

以下のような情報をまとめて「処理情報」と呼びます。

- 実行者：従業員名もしくはメールアドレスで記載します。
- 受付日時：`2023/3/9 00:00:00`といった形式で記載します。
- 所要時間：`hoge分`、`hoge時間`といった形式で記載します。

##### 4. 処理結果

以下のような情報をまとめて「処理結果」と呼びます。

- 結果詳細
- エラー内容
- 添付ファイル
    - CSVの書き出し操作やエラーの詳細をファイルで伝える場合は、CSVファイルをダウンロードできるボタンを配置します。
    - 添付ファイルがない場合には非表示になります。

ライティングの詳細は「[種類]()」で説明します。

#### レイアウト

## 種類

バックグラウンド処理には4つの状態が存在します。

- 処理中
- 成功
- 一部失敗
- 失敗

それぞれによって、次の表示パターンが変化します。

- 一覧・詳細画面共通
    - StatusLabelの色と文言が変わります。
- 一覧画面
    - 結果概要の文言が変わります。
- 詳細画面
    - 処理結果
        - 結果詳細の文言が変わります。
        - エラー内容の文言が変わります。

| |StatusLabel|結果概要|結果詳細|エラー内容|
|---|---|---|---|---|
|処理中|---|何も表示しません。|何も表示しません。|何も表示しません。|
|成功|---|次のような文言を表示します。 `｛ファイル名｝を｛操作｝しました。`・`◯件の｛オブジェクト｝を｛操作｝しました。`|結果概要と同様の内容を表示します。|何も表示しません。|
|一部失敗|---|次のような文言を表示します。`◯件の｛オブジェクト｝の｛操作｝に成功しました。◯件の{オブジェクト}の{操作}に失敗しました。`|成功した件数を記載します。|失敗した件数を記載します。エラーの原因がわかる場合には原因についても記載します。|
|失敗|---|次のような文言を表示します。`◯件の{オブジェクト}の{操作}に失敗しました。`|何も表示しません。|失敗した件数を記載します。エラーの原因がわかる場合には原因についても記載します。|

エラー内容の詳しい書き方については[エラーメッセージ](https://smarthr.design/products/contents/error-messages/#h4-0)を参照してください。


